---
import BaseHead from "../components/BaseHead.astro";
import { ViewTransitions } from "astro:transitions";
import { SITE_TITLE, SITE_DESCRIPTION, TRANSITION_API } from "../config";

const {
  image,
  title = SITE_TITLE,
  description = SITE_DESCRIPTION,
  includeSidebar = true,
  sideBarActiveItemID,
  ogType,
} = Astro.props;
---

<!doctype html>
<html lang="en" data-theme="cupcake">
  <head>
    <BaseHead title={title} description={description} image={image} , ogType={ogType} />
    {TRANSITION_API && <ViewTransitions />}
  </head>
  <body>
    <nav class="bg-white sticky top-0 z-50">
      <div class="max-w-7xl mx-auto px-8 py-1.5">
        <div class="flex justify-between items-center">
          <div class="flex-shrink-0">
            <a href="/" class="text-xl font-bold text-gray-800">채승호</a>
          </div>
          <div class="hidden md:flex space-x-8">
            <a href="/" class="nav-link" id="home">About</a>
            <a href="/projects" class="nav-link" id="projects">Projects</a>
            <a href="/blog/" class="nav-link" id="blog">Posts</a>
            <a href="/resume" class="nav-link" id="resume">Resume</a>
            <a href="/contact" class="nav-link" id="contact">Contact</a>
          </div>
          <div class="md:hidden">
            <button id="mobile-menu-button" class="text-gray-600 hover:text-gray-800">
              <svg class="h-6 w-6 fill-current" viewBox="0 0 24 24">
                <path d="M4 5h16a1 1 0 0 1 0 2H4a1 1 0 1 1 0-2zM4 11h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2zM4 17h16a1 1 0 0 1 0 2H4a1 1 0 0 1 0-2z"/>
              </svg>
            </button>
          </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden pt-1.5">
          <div class="flex flex-col space-y-1">
            <a href="/" class="nav-link-mobile" id="home-mobile">About</a>
            <a href="/projects" class="nav-link-mobile" id="projects-mobile">Projects</a>
            <a href="/blog/" class="nav-link-mobile" id="blog-mobile">Posts</a>
            <a href="/resume" class="nav-link-mobile" id="resume-mobile">Resume</a>
            <a href="/contact" class="nav-link-mobile" id="contact-mobile">Contact</a>
          </div>
        </div>
      </div>
      <div class="max-w-7xl mx-auto px-8">
        <div class="border-b-2 border-gray-800"></div>
      </div>
    </nav>

    <main class="min-h-screen bg-white">
      <slot />
    </main>
  </body>
</html>

<style>
  .nav-link {
    @apply text-gray-600 hover:text-gray-800 px-3 py-2 text-sm font-medium transition-colors duration-200;
  }
  .nav-link.active {
    @apply text-gray-800 font-semibold;
  }
  .nav-link-mobile {
    @apply text-gray-600 hover:text-gray-800 px-3 py-2 text-sm font-medium hover:bg-gray-50 transition-colors duration-200;
  }
  .nav-link-mobile.active {
    @apply text-gray-800 bg-gray-100 font-semibold;
  }
</style>

<script define:vars={{ sideBarActiveItemID }}>
const activeItemElem = document.getElementById(sideBarActiveItemID);
const activeItemElemMobile = document.getElementById(sideBarActiveItemID + '-mobile');

if (activeItemElem) activeItemElem.classList.add('active');
if (activeItemElemMobile) activeItemElemMobile.classList.add('active');

const mobileMenuButton = document.getElementById('mobile-menu-button');
const mobileMenu = document.getElementById('mobile-menu');

if (mobileMenuButton && mobileMenu) {
  mobileMenuButton.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
  });
}
</script>
